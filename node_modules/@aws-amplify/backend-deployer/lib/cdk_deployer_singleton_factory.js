import { CDKDeployer } from './cdk_deployer.js';
import { CdkErrorMapper } from './cdk_error_mapper.js';
import { BackendLocator } from '@aws-amplify/platform-core';
/**
 * Factory to create a backend deployer
 */
export class BackendDeployerFactory {
    packageManagerController;
    static instance;
    /**
     * constructor - sets the packageManagerController
     */
    constructor(packageManagerController) {
        this.packageManagerController = packageManagerController;
    }
    /**
     * Returns a single instance of BackendDeployer
     */
    getInstance() {
        if (!BackendDeployerFactory.instance) {
            BackendDeployerFactory.instance = new CDKDeployer(new CdkErrorMapper(), new BackendLocator(), this.packageManagerController);
        }
        return BackendDeployerFactory.instance;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrX2RlcGxveWVyX3NpbmdsZXRvbl9mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2Nka19kZXBsb3llcl9zaW5nbGV0b25fZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQStCNUQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXNCO0lBT2Q7SUFOWCxNQUFNLENBQUMsUUFBUSxDQUE4QjtJQUVyRDs7T0FFRztJQUNILFlBQ21CLHdCQUFrRDtRQUFsRCw2QkFBd0IsR0FBeEIsd0JBQXdCLENBQTBCO0lBQ2xFLENBQUM7SUFFSjs7T0FFRztJQUNILFdBQVc7UUFDVCxJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxFQUFFO1lBQ3BDLHNCQUFzQixDQUFDLFFBQVEsR0FBRyxJQUFJLFdBQVcsQ0FDL0MsSUFBSSxjQUFjLEVBQUUsRUFDcEIsSUFBSSxjQUFjLEVBQUUsRUFDcEIsSUFBSSxDQUFDLHdCQUF3QixDQUM5QixDQUFDO1NBQ0g7UUFDRCxPQUFPLHNCQUFzQixDQUFDLFFBQVEsQ0FBQztJQUN6QyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBCYWNrZW5kSWRlbnRpZmllcixcbiAgdHlwZSBQYWNrYWdlTWFuYWdlckNvbnRyb2xsZXIsXG59IGZyb20gJ0Bhd3MtYW1wbGlmeS9wbHVnaW4tdHlwZXMnO1xuaW1wb3J0IHsgQ0RLRGVwbG95ZXIgfSBmcm9tICcuL2Nka19kZXBsb3llci5qcyc7XG5pbXBvcnQgeyBDZGtFcnJvck1hcHBlciB9IGZyb20gJy4vY2RrX2Vycm9yX21hcHBlci5qcyc7XG5pbXBvcnQgeyBCYWNrZW5kTG9jYXRvciB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9wbGF0Zm9ybS1jb3JlJztcblxuZXhwb3J0IHR5cGUgRGVwbG95UHJvcHMgPSB7XG4gIHNlY3JldExhc3RVcGRhdGVkPzogRGF0ZTtcbiAgdmFsaWRhdGVBcHBTb3VyY2VzPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveVJlc3VsdCA9IHtcbiAgZGVwbG95bWVudFRpbWVzOiBEZXBsb3ltZW50VGltZXM7XG59O1xuXG5leHBvcnQgdHlwZSBEZXN0cm95UmVzdWx0ID0ge1xuICBkZXBsb3ltZW50VGltZXM6IERlcGxveW1lbnRUaW1lcztcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveW1lbnRUaW1lcyA9IHtcbiAgc3ludGhlc2lzVGltZT86IG51bWJlcjtcbiAgdG90YWxUaW1lPzogbnVtYmVyO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGFuIGludm9rYWJsZSBjb21tYW5kXG4gKi9cbmV4cG9ydCB0eXBlIEJhY2tlbmREZXBsb3llciA9IHtcbiAgZGVwbG95OiAoXG4gICAgYmFja2VuZElkOiBCYWNrZW5kSWRlbnRpZmllcixcbiAgICBkZXBsb3lQcm9wcz86IERlcGxveVByb3BzXG4gICkgPT4gUHJvbWlzZTxEZXBsb3lSZXN1bHQ+O1xuICBkZXN0cm95OiAoYmFja2VuZElkOiBCYWNrZW5kSWRlbnRpZmllcikgPT4gUHJvbWlzZTxEZXN0cm95UmVzdWx0Pjtcbn07XG5cbi8qKlxuICogRmFjdG9yeSB0byBjcmVhdGUgYSBiYWNrZW5kIGRlcGxveWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBCYWNrZW5kRGVwbG95ZXJGYWN0b3J5IHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEJhY2tlbmREZXBsb3llciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogY29uc3RydWN0b3IgLSBzZXRzIHRoZSBwYWNrYWdlTWFuYWdlckNvbnRyb2xsZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGFja2FnZU1hbmFnZXJDb250cm9sbGVyOiBQYWNrYWdlTWFuYWdlckNvbnRyb2xsZXJcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc2luZ2xlIGluc3RhbmNlIG9mIEJhY2tlbmREZXBsb3llclxuICAgKi9cbiAgZ2V0SW5zdGFuY2UoKTogQmFja2VuZERlcGxveWVyIHtcbiAgICBpZiAoIUJhY2tlbmREZXBsb3llckZhY3RvcnkuaW5zdGFuY2UpIHtcbiAgICAgIEJhY2tlbmREZXBsb3llckZhY3RvcnkuaW5zdGFuY2UgPSBuZXcgQ0RLRGVwbG95ZXIoXG4gICAgICAgIG5ldyBDZGtFcnJvck1hcHBlcigpLFxuICAgICAgICBuZXcgQmFja2VuZExvY2F0b3IoKSxcbiAgICAgICAgdGhpcy5wYWNrYWdlTWFuYWdlckNvbnRyb2xsZXJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBCYWNrZW5kRGVwbG95ZXJGYWN0b3J5Lmluc3RhbmNlO1xuICB9XG59XG4iXX0=