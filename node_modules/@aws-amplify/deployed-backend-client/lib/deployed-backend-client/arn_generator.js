/**
 * Generates a link to a resource in the AWS Console
 */
export class ArnGenerator {
    /**
     * Generates an AWS Console link to the stack resource
     * @param stackResourceSummary object including PhysicalResourceId and ResourceType, from CFN DescribeStackResources
     * @param region If `undefined` is passed here, we do not generate the arn. Not enough data -> no ARN
     * @param accountId If `undefined` is passed here, we do not generate the arn. Not enough data -> no ARN
     * @returns string if arn can be generated, undefined otherwise
     */
    generateArn = (stackResourceSummary, region, accountId) => {
        if (!accountId || !region) {
            return;
        }
        // Supported keys from https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html
        const physicalResourceId = stackResourceSummary.PhysicalResourceId;
        // Some resources use arns directly as physicalResourceId.
        // These include: AWS::AppSync::GraphQLApi, AWS::AppSync::DataSource, AWS::CloudFormation::Stack, AWS::Lambda::LayerVersion
        if (this.isArn(physicalResourceId)) {
            return physicalResourceId;
        }
        switch (stackResourceSummary.ResourceType) {
            case 'AWS::Cognito::UserPool':
                return `arn:aws:cognito-idp:${region}:${accountId}:userpool/${physicalResourceId}`;
            case 'AWS::Cognito::IdentityPool':
                return `arn:aws:cognito-identity:${region}:${accountId}:identitypool/${physicalResourceId}`;
            case 'AWS::IAM::Role':
                return `arn:aws:iam:${region}:${accountId}:role/${physicalResourceId}`;
            case 'AWS::DynamoDB::Table':
                return `arn:aws:dynamodb:${region}:${accountId}:table/${physicalResourceId}`;
            case 'AWS::S3::Bucket':
                return `arn:aws:s3:::${physicalResourceId}`;
            case 'AWS::Lambda::Function':
                return `arn:aws:lambda:${region}:${accountId}:function:${physicalResourceId}`;
            default:
                break;
        }
        return;
    };
    isArn = (potentialArn) => {
        return potentialArn.startsWith('arn:');
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJuX2dlbmVyYXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZXBsb3llZC1iYWNrZW5kLWNsaWVudC9hcm5fZ2VuZXJhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBOztHQUVHO0FBQ0gsTUFBTSxPQUFPLFlBQVk7SUFDdkI7Ozs7OztPQU1HO0lBQ0gsV0FBVyxHQUFHLENBQ1osb0JBR0MsRUFDRCxNQUEwQixFQUMxQixTQUE2QixFQUNULEVBQUU7UUFDdEIsSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUN6QixPQUFPO1NBQ1I7UUFFRCx5SEFBeUg7UUFDekgsTUFBTSxrQkFBa0IsR0FDdEIsb0JBQW9CLENBQUMsa0JBQTRCLENBQUM7UUFFcEQsMERBQTBEO1FBQzFELDJIQUEySDtRQUMzSCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsRUFBRTtZQUNsQyxPQUFPLGtCQUFrQixDQUFDO1NBQzNCO1FBRUQsUUFBUSxvQkFBb0IsQ0FBQyxZQUFZLEVBQUU7WUFDekMsS0FBSyx3QkFBd0I7Z0JBQzNCLE9BQU8sdUJBQXVCLE1BQU0sSUFBSSxTQUFTLGFBQWEsa0JBQWtCLEVBQUUsQ0FBQztZQUNyRixLQUFLLDRCQUE0QjtnQkFDL0IsT0FBTyw0QkFBNEIsTUFBTSxJQUFJLFNBQVMsaUJBQWlCLGtCQUFrQixFQUFFLENBQUM7WUFDOUYsS0FBSyxnQkFBZ0I7Z0JBQ25CLE9BQU8sZUFBZSxNQUFNLElBQUksU0FBUyxTQUFTLGtCQUFrQixFQUFFLENBQUM7WUFDekUsS0FBSyxzQkFBc0I7Z0JBQ3pCLE9BQU8sb0JBQW9CLE1BQU0sSUFBSSxTQUFTLFVBQVUsa0JBQWtCLEVBQUUsQ0FBQztZQUMvRSxLQUFLLGlCQUFpQjtnQkFDcEIsT0FBTyxnQkFBZ0Isa0JBQWtCLEVBQUUsQ0FBQztZQUM5QyxLQUFLLHVCQUF1QjtnQkFDMUIsT0FBTyxrQkFBa0IsTUFBTSxJQUFJLFNBQVMsYUFBYSxrQkFBa0IsRUFBRSxDQUFDO1lBQ2hGO2dCQUNFLE1BQU07U0FDVDtRQUVELE9BQU87SUFDVCxDQUFDLENBQUM7SUFFTSxLQUFLLEdBQUcsQ0FBQyxZQUFvQixFQUFFLEVBQUU7UUFDdkMsT0FBTyxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUMsQ0FBQztDQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhY2tSZXNvdXJjZVN1bW1hcnkgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb24nO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGxpbmsgdG8gYSByZXNvdXJjZSBpbiB0aGUgQVdTIENvbnNvbGVcbiAqL1xuZXhwb3J0IGNsYXNzIEFybkdlbmVyYXRvciB7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYW4gQVdTIENvbnNvbGUgbGluayB0byB0aGUgc3RhY2sgcmVzb3VyY2VcbiAgICogQHBhcmFtIHN0YWNrUmVzb3VyY2VTdW1tYXJ5IG9iamVjdCBpbmNsdWRpbmcgUGh5c2ljYWxSZXNvdXJjZUlkIGFuZCBSZXNvdXJjZVR5cGUsIGZyb20gQ0ZOIERlc2NyaWJlU3RhY2tSZXNvdXJjZXNcbiAgICogQHBhcmFtIHJlZ2lvbiBJZiBgdW5kZWZpbmVkYCBpcyBwYXNzZWQgaGVyZSwgd2UgZG8gbm90IGdlbmVyYXRlIHRoZSBhcm4uIE5vdCBlbm91Z2ggZGF0YSAtPiBubyBBUk5cbiAgICogQHBhcmFtIGFjY291bnRJZCBJZiBgdW5kZWZpbmVkYCBpcyBwYXNzZWQgaGVyZSwgd2UgZG8gbm90IGdlbmVyYXRlIHRoZSBhcm4uIE5vdCBlbm91Z2ggZGF0YSAtPiBubyBBUk5cbiAgICogQHJldHVybnMgc3RyaW5nIGlmIGFybiBjYW4gYmUgZ2VuZXJhdGVkLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gICAqL1xuICBnZW5lcmF0ZUFybiA9IChcbiAgICBzdGFja1Jlc291cmNlU3VtbWFyeTogUGljazxcbiAgICAgIFN0YWNrUmVzb3VyY2VTdW1tYXJ5LFxuICAgICAgJ1BoeXNpY2FsUmVzb3VyY2VJZCcgfCAnUmVzb3VyY2VUeXBlJ1xuICAgID4sXG4gICAgcmVnaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgYWNjb3VudElkOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICBpZiAoIWFjY291bnRJZCB8fCAhcmVnaW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydGVkIGtleXMgZnJvbSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTQ2xvdWRGb3JtYXRpb24vbGF0ZXN0L1VzZXJHdWlkZS9hd3MtdGVtcGxhdGUtcmVzb3VyY2UtdHlwZS1yZWYuaHRtbFxuICAgIGNvbnN0IHBoeXNpY2FsUmVzb3VyY2VJZCA9XG4gICAgICBzdGFja1Jlc291cmNlU3VtbWFyeS5QaHlzaWNhbFJlc291cmNlSWQgYXMgc3RyaW5nO1xuXG4gICAgLy8gU29tZSByZXNvdXJjZXMgdXNlIGFybnMgZGlyZWN0bHkgYXMgcGh5c2ljYWxSZXNvdXJjZUlkLlxuICAgIC8vIFRoZXNlIGluY2x1ZGU6IEFXUzo6QXBwU3luYzo6R3JhcGhRTEFwaSwgQVdTOjpBcHBTeW5jOjpEYXRhU291cmNlLCBBV1M6OkNsb3VkRm9ybWF0aW9uOjpTdGFjaywgQVdTOjpMYW1iZGE6OkxheWVyVmVyc2lvblxuICAgIGlmICh0aGlzLmlzQXJuKHBoeXNpY2FsUmVzb3VyY2VJZCkpIHtcbiAgICAgIHJldHVybiBwaHlzaWNhbFJlc291cmNlSWQ7XG4gICAgfVxuXG4gICAgc3dpdGNoIChzdGFja1Jlc291cmNlU3VtbWFyeS5SZXNvdXJjZVR5cGUpIHtcbiAgICAgIGNhc2UgJ0FXUzo6Q29nbml0bzo6VXNlclBvb2wnOlxuICAgICAgICByZXR1cm4gYGFybjphd3M6Y29nbml0by1pZHA6JHtyZWdpb259OiR7YWNjb3VudElkfTp1c2VycG9vbC8ke3BoeXNpY2FsUmVzb3VyY2VJZH1gO1xuICAgICAgY2FzZSAnQVdTOjpDb2duaXRvOjpJZGVudGl0eVBvb2wnOlxuICAgICAgICByZXR1cm4gYGFybjphd3M6Y29nbml0by1pZGVudGl0eToke3JlZ2lvbn06JHthY2NvdW50SWR9OmlkZW50aXR5cG9vbC8ke3BoeXNpY2FsUmVzb3VyY2VJZH1gO1xuICAgICAgY2FzZSAnQVdTOjpJQU06OlJvbGUnOlxuICAgICAgICByZXR1cm4gYGFybjphd3M6aWFtOiR7cmVnaW9ufToke2FjY291bnRJZH06cm9sZS8ke3BoeXNpY2FsUmVzb3VyY2VJZH1gO1xuICAgICAgY2FzZSAnQVdTOjpEeW5hbW9EQjo6VGFibGUnOlxuICAgICAgICByZXR1cm4gYGFybjphd3M6ZHluYW1vZGI6JHtyZWdpb259OiR7YWNjb3VudElkfTp0YWJsZS8ke3BoeXNpY2FsUmVzb3VyY2VJZH1gO1xuICAgICAgY2FzZSAnQVdTOjpTMzo6QnVja2V0JzpcbiAgICAgICAgcmV0dXJuIGBhcm46YXdzOnMzOjo6JHtwaHlzaWNhbFJlc291cmNlSWR9YDtcbiAgICAgIGNhc2UgJ0FXUzo6TGFtYmRhOjpGdW5jdGlvbic6XG4gICAgICAgIHJldHVybiBgYXJuOmF3czpsYW1iZGE6JHtyZWdpb259OiR7YWNjb3VudElkfTpmdW5jdGlvbjoke3BoeXNpY2FsUmVzb3VyY2VJZH1gO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIHByaXZhdGUgaXNBcm4gPSAocG90ZW50aWFsQXJuOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gcG90ZW50aWFsQXJuLnN0YXJ0c1dpdGgoJ2FybjonKTtcbiAgfTtcbn1cbiJdfQ==