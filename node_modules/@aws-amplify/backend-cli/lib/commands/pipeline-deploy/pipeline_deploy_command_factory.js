import { BackendDeployerFactory } from '@aws-amplify/backend-deployer';
import { PackageManagerControllerFactory } from '@aws-amplify/cli-core';
import { PipelineDeployCommand, } from './pipeline_deploy_command.js';
import { fromNodeProviderChain } from '@aws-sdk/credential-providers';
import { ClientConfigGeneratorAdapter } from '../../client-config/client_config_generator_adapter.js';
import { printer } from '../../printer.js';
/**
 * Creates pipeline deploy command
 */
export const createPipelineDeployCommand = () => {
    const credentialProvider = fromNodeProviderChain();
    const clientConfigGenerator = new ClientConfigGeneratorAdapter(credentialProvider);
    const packageManagerControllerFactory = new PackageManagerControllerFactory(process.cwd(), printer);
    const backendDeployerFactory = new BackendDeployerFactory(packageManagerControllerFactory.getPackageManagerController());
    const backendDeployer = backendDeployerFactory.getInstance();
    return new PipelineDeployCommand(clientConfigGenerator, backendDeployer);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlwZWxpbmVfZGVwbG95X2NvbW1hbmRfZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9waXBlbGluZS1kZXBsb3kvcGlwZWxpbmVfZGVwbG95X2NvbW1hbmRfZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUV4RSxPQUFPLEVBQ0wscUJBQXFCLEdBRXRCLE1BQU0sOEJBQThCLENBQUM7QUFDdEMsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdEUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sd0RBQXdELENBQUM7QUFDdEcsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRTNDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sMkJBQTJCLEdBQUcsR0FHekMsRUFBRTtJQUNGLE1BQU0sa0JBQWtCLEdBQUcscUJBQXFCLEVBQUUsQ0FBQztJQUNuRCxNQUFNLHFCQUFxQixHQUFHLElBQUksNEJBQTRCLENBQzVELGtCQUFrQixDQUNuQixDQUFDO0lBQ0YsTUFBTSwrQkFBK0IsR0FBRyxJQUFJLCtCQUErQixDQUN6RSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQ2IsT0FBTyxDQUNSLENBQUM7SUFDRixNQUFNLHNCQUFzQixHQUFHLElBQUksc0JBQXNCLENBQ3ZELCtCQUErQixDQUFDLDJCQUEyQixFQUFFLENBQzlELENBQUM7SUFDRixNQUFNLGVBQWUsR0FBRyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUM3RCxPQUFPLElBQUkscUJBQXFCLENBQUMscUJBQXFCLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDM0UsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZE1vZHVsZSB9IGZyb20gJ3lhcmdzJztcbmltcG9ydCB7IEJhY2tlbmREZXBsb3llckZhY3RvcnkgfSBmcm9tICdAYXdzLWFtcGxpZnkvYmFja2VuZC1kZXBsb3llcic7XG5pbXBvcnQgeyBQYWNrYWdlTWFuYWdlckNvbnRyb2xsZXJGYWN0b3J5IH0gZnJvbSAnQGF3cy1hbXBsaWZ5L2NsaS1jb3JlJztcblxuaW1wb3J0IHtcbiAgUGlwZWxpbmVEZXBsb3lDb21tYW5kLFxuICBQaXBlbGluZURlcGxveUNvbW1hbmRPcHRpb25zLFxufSBmcm9tICcuL3BpcGVsaW5lX2RlcGxveV9jb21tYW5kLmpzJztcbmltcG9ydCB7IGZyb21Ob2RlUHJvdmlkZXJDaGFpbiB9IGZyb20gJ0Bhd3Mtc2RrL2NyZWRlbnRpYWwtcHJvdmlkZXJzJztcbmltcG9ydCB7IENsaWVudENvbmZpZ0dlbmVyYXRvckFkYXB0ZXIgfSBmcm9tICcuLi8uLi9jbGllbnQtY29uZmlnL2NsaWVudF9jb25maWdfZ2VuZXJhdG9yX2FkYXB0ZXIuanMnO1xuaW1wb3J0IHsgcHJpbnRlciB9IGZyb20gJy4uLy4uL3ByaW50ZXIuanMnO1xuXG4vKipcbiAqIENyZWF0ZXMgcGlwZWxpbmUgZGVwbG95IGNvbW1hbmRcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVBpcGVsaW5lRGVwbG95Q29tbWFuZCA9ICgpOiBDb21tYW5kTW9kdWxlPFxuICBvYmplY3QsXG4gIFBpcGVsaW5lRGVwbG95Q29tbWFuZE9wdGlvbnNcbj4gPT4ge1xuICBjb25zdCBjcmVkZW50aWFsUHJvdmlkZXIgPSBmcm9tTm9kZVByb3ZpZGVyQ2hhaW4oKTtcbiAgY29uc3QgY2xpZW50Q29uZmlnR2VuZXJhdG9yID0gbmV3IENsaWVudENvbmZpZ0dlbmVyYXRvckFkYXB0ZXIoXG4gICAgY3JlZGVudGlhbFByb3ZpZGVyXG4gICk7XG4gIGNvbnN0IHBhY2thZ2VNYW5hZ2VyQ29udHJvbGxlckZhY3RvcnkgPSBuZXcgUGFja2FnZU1hbmFnZXJDb250cm9sbGVyRmFjdG9yeShcbiAgICBwcm9jZXNzLmN3ZCgpLFxuICAgIHByaW50ZXJcbiAgKTtcbiAgY29uc3QgYmFja2VuZERlcGxveWVyRmFjdG9yeSA9IG5ldyBCYWNrZW5kRGVwbG95ZXJGYWN0b3J5KFxuICAgIHBhY2thZ2VNYW5hZ2VyQ29udHJvbGxlckZhY3RvcnkuZ2V0UGFja2FnZU1hbmFnZXJDb250cm9sbGVyKClcbiAgKTtcbiAgY29uc3QgYmFja2VuZERlcGxveWVyID0gYmFja2VuZERlcGxveWVyRmFjdG9yeS5nZXRJbnN0YW5jZSgpO1xuICByZXR1cm4gbmV3IFBpcGVsaW5lRGVwbG95Q29tbWFuZChjbGllbnRDb25maWdHZW5lcmF0b3IsIGJhY2tlbmREZXBsb3llcik7XG59O1xuIl19