import { AmplifyUserError, } from '@aws-amplify/platform-core';
/**
 * Reads the local app name from package.json#name in the current directory
 */
export class LocalNamespaceResolver {
    packageJsonReader;
    /**
     * packageJsonReader is assigned to an instance member for testing.
     * resolve is bound to this so that it can be passed as a function reference
     */
    constructor(packageJsonReader) {
        this.packageJsonReader = packageJsonReader;
    }
    /**
     * Returns the value of package.json#name from the current working directory
     */
    resolve = async () => {
        const name = this.packageJsonReader.readFromCwd().name;
        if (name)
            return name;
        throw new AmplifyUserError('InvalidPackageJsonError', {
            message: 'Cannot load name from the package.json',
            resolution: 'Ensure you are running amplify commands in root of your project (i.e. in the parent of the `amplify` directory). Also ensure that your root package.json file has a "name" field.',
        });
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYWxfbmFtZXNwYWNlX3Jlc29sdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2JhY2tlbmQtaWRlbnRpZmllci9sb2NhbF9uYW1lc3BhY2VfcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLGdCQUFnQixHQUVqQixNQUFNLDRCQUE0QixDQUFDO0FBTXBDOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHNCQUFzQjtJQUtKO0lBSjdCOzs7T0FHRztJQUNILFlBQTZCLGlCQUFvQztRQUFwQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO0lBQUcsQ0FBQztJQUVyRTs7T0FFRztJQUNILE9BQU8sR0FBRyxLQUFLLElBQUksRUFBRTtRQUNuQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQ3ZELElBQUksSUFBSTtZQUFFLE9BQU8sSUFBSSxDQUFDO1FBQ3RCLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyx5QkFBeUIsRUFBRTtZQUNwRCxPQUFPLEVBQUUsd0NBQXdDO1lBQ2pELFVBQVUsRUFDUixtTEFBbUw7U0FDdEwsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0NBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBbXBsaWZ5VXNlckVycm9yLFxuICBQYWNrYWdlSnNvblJlYWRlcixcbn0gZnJvbSAnQGF3cy1hbXBsaWZ5L3BsYXRmb3JtLWNvcmUnO1xuXG5leHBvcnQgdHlwZSBOYW1lc3BhY2VSZXNvbHZlciA9IHtcbiAgcmVzb2x2ZTogKCkgPT4gUHJvbWlzZTxzdHJpbmc+O1xufTtcblxuLyoqXG4gKiBSZWFkcyB0aGUgbG9jYWwgYXBwIG5hbWUgZnJvbSBwYWNrYWdlLmpzb24jbmFtZSBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnlcbiAqL1xuZXhwb3J0IGNsYXNzIExvY2FsTmFtZXNwYWNlUmVzb2x2ZXIgaW1wbGVtZW50cyBOYW1lc3BhY2VSZXNvbHZlciB7XG4gIC8qKlxuICAgKiBwYWNrYWdlSnNvblJlYWRlciBpcyBhc3NpZ25lZCB0byBhbiBpbnN0YW5jZSBtZW1iZXIgZm9yIHRlc3RpbmcuXG4gICAqIHJlc29sdmUgaXMgYm91bmQgdG8gdGhpcyBzbyB0aGF0IGl0IGNhbiBiZSBwYXNzZWQgYXMgYSBmdW5jdGlvbiByZWZlcmVuY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcGFja2FnZUpzb25SZWFkZXI6IFBhY2thZ2VKc29uUmVhZGVyKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBwYWNrYWdlLmpzb24jbmFtZSBmcm9tIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5XG4gICAqL1xuICByZXNvbHZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhY2thZ2VKc29uUmVhZGVyLnJlYWRGcm9tQ3dkKCkubmFtZTtcbiAgICBpZiAobmFtZSkgcmV0dXJuIG5hbWU7XG4gICAgdGhyb3cgbmV3IEFtcGxpZnlVc2VyRXJyb3IoJ0ludmFsaWRQYWNrYWdlSnNvbkVycm9yJywge1xuICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBsb2FkIG5hbWUgZnJvbSB0aGUgcGFja2FnZS5qc29uJyxcbiAgICAgIHJlc29sdXRpb246XG4gICAgICAgICdFbnN1cmUgeW91IGFyZSBydW5uaW5nIGFtcGxpZnkgY29tbWFuZHMgaW4gcm9vdCBvZiB5b3VyIHByb2plY3QgKGkuZS4gaW4gdGhlIHBhcmVudCBvZiB0aGUgYGFtcGxpZnlgIGRpcmVjdG9yeSkuIEFsc28gZW5zdXJlIHRoYXQgeW91ciByb290IHBhY2thZ2UuanNvbiBmaWxlIGhhcyBhIFwibmFtZVwiIGZpZWxkLicsXG4gICAgfSk7XG4gIH07XG59XG4iXX0=